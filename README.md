# similar-images

Use LLMs to search for images.

Searching for images can be a time consuming process, even with filters -
manually using a search engine and downloading images one by one can be tedious,
and having to look at many images to find the right one can be time consuming.

Similar Images cuts down on the time you need to spend on these tasks.
First, it interacts with search engines on your behalf - you only describe what you
want and let it search and download.
Second, it provides a range of filters to cut down on the number of images that are
not relevant.

# Use cases

## Expand your collection of images

Automates the use of Bing Images to find and download images.
2 modes are supported:
- Keyword search.
- Similar image search. Provide a list of images stored locally.
  Similar Images will go over them one by one and use Bing's "Search using an image" functionality to find similar images.

Some of the filters that you can use:
- Image size.
- Similarity to existing images in your collection. Image Search can use and fill a local database keeping track of local images. It can then detect when a new image is identical to or similar to an existing image, by using different hashing algorithms.
- LLMs. Many images won't match your criteria -- they might have watermark or be generated by AI, for instance. You can specify your LLM prompts and the model that you want to use to filter out non relevant images.

Whenever one writes LLM prompts, one needs to be evaluate their quality.
In order to do that, Similar Images can be run in a third mode of operation,
in which the pipeline of filters is run against a set of local images.
By providing two sets of images, one that is relevant and one that is not,
you can understand the quality of the pipeline.

## Upgrade the quality of your collection of images

TODO

# Usage

Set up:

```bash
make create-venv
```

## Search using keywords

Download 10 pictures of cats. Meow!

```bash
python -m scripts.scrape2 -q cats -n 10
```

Now if we were to run that query again, we'd download mostly the same image. That's not very useful.
However we can use a database to keep track of which images we have downloaded so far, and
avoid downloading them again. When we specify a database, by default Similar Images will
exclude images from a known URL, that have identical contents, or that are almost identical
based on hashing techniques. The first time we use the database it will start to get
populated, and you should see the same images being downloaded a second time. But if we 
repeat the command, we'll see that the first images are marked as duplicate. They won't
be downloaded again, and Similar Images will continue looking at further search results
to find 10 images. You can therefore run Similar Images frequently and only have to check new images.

```bash
python -m scripts.scrape2 -v -q cats -n 10 --db db.jsonl
```

We can make things more interesting. First, let's exclude images that are smaller
than 1500 x 1200 pixels. Then, instead of only searching for cats, let's also search for dogs.

```bash
python -m scripts.scrape2 -v -q "cats|dogs" -n 10 -o out --db db.jsonl --min-size=1500,1200
```

## Seach using existing images

TODO

## Use LLMs

# Development

Run tests:

```bash
make create-venv
make test
```

Note: On Ubuntu, you first need to install a few things:

```bash
sudo apt update
sudo apt install python3.12-venv
```
